As a child may cry to his father, so David cried to God. David was not saying, "Don't punish me," but "Don't punish me while you are angry." What I see here is that he was acknowledging that he did deserve to be punished, but he asked that God would temper His discipline with mercy. Like children, we are free to ask for mercy, but we should not deny that we deserve punishment.