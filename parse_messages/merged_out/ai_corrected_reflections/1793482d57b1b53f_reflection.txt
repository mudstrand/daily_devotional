James does not say if trouble comes our way, but whenever it does, he assumes that we will have troubles and that it is possible to profit from them. The point is not to pretend to be happy when we face pain, but to have a positive outlook ("let it be an opportunity for joy") because of what troubles can produce in our life. James tells us to turn our hardships into times of learning. Yes, tough times can teach us perseverance.